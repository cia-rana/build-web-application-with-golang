# 1.1 Goのインストール

## 3つのインストール方法
Goの開発環境をインストールする方法はいつくもあります。どれでも好きなのを選んでかまいません。ここでは3つのよくあるインストール方法をご紹介します：

- 公式のインストールパッケージ：Goチームは便利なインストールパッケージを用意しています。Windows, Linux, Macなどのオペレーティングシステムをサポートしています。とりあえずさっとインストールするにはうってつけでしょう。[Goのダウンロードページ](https://golang.org/dl/)からインストールできます。
- ソースコードからインストール：Unix系システムに造詣の深い開発者に人気です。
- サードパーティツールを使用したインストール：Goをインストールするサードパーティのツールやパッケージマネージャが数多く存在します。たとえばUbuntuのapt-get、Macのhomebrewなどです。

最後に同じシステムの中で異なるバージョンのGoをインストールする場合は、[GVM](https://github.com/moovweb/gvm)が参考になります。GVMはそれを達成するためにうってつけのツールだと思いますが、詳しくは読者自身でお調べください。

## ソースコードからインストール
Go1.5以上をインストールする場合は、まずはそれ以前のバージョンのGoをインストールする必要があります。つまりGoをインストールするためのGoが必要です。

Go1.4以下をインストールする場合は、GoのPlan 9 CやAT&Tアセンブラで書かれている部分をコンパイルするためにCコンパイラが必要です。

Macでは、すでにXcodeにコンパイラが含まれています。

Unix系システムでは、gccなどのツールをインストールする必要があります。例えばUbuntuではターミナルで`sudo apt-get install gcc libc6-dev`を実行することでコンパイラをインストールすることができます。

Windowsでは、MinGWをインストールする必要があります。その後MinGWでgccをインストールして、適切な環境変数を設定します。**（64bitのWindowsを使用している場合は、64bitのMinGWをインストールしてください。）**

現段階で、以下のコマンドを実行してGoのソースコードをクローンし、コンパイルします。**（それにより、カレントディレクトリにソースコードがクローンされます。作業を続ける前に、作業パスを切り替えてください。これには少々時間がかかります。）**

	git clone https://go.googlesource.com/go
	cd go/src
	./all.bash

all.bashを実行後"ALL TESTS PASSED"が表示されると、インストール成功です。

上記はUnixスタイルのコマンドです、Windowsもインストール方法は似ており、`all.bat`を実行するだけです。コンパイラはMinGWのgccを使います。

もしMacまたはUnixユーザであればいくつかの環境変数を設定する必要があります。再起動しても有効にしたい場合は以下のコマンドを`.bashrc`や`.zsh`に書いておきます。

	export GOPATH=$HOME/gopath
	export PATH=$PATH:$HOME/go/bin:$GOPATH/bin

ファイルに書き込んだ場合は、`source $HOME/.bashrc`や`source $HOME/.zshrc`を実行してすぐに設定を有効にします。

Windowsシステムの場合は、環境変数を設定する必要があります。pathにgoが存在するディレクトリを追加し、gopath変数を設定します。

設定が終わり、コマンドプロンプトで`go`を入力すると、下図のような画面が表示されるはずです。

![](images/1.1.mac.png?raw=true)

図1.1 ソースコードからインストールした後、Goコマンドを実行

Goの使い方が表示されれば、Goのインストールは成功です。もしこのコマンドが存在しない場合は、環境変数PATHの中にGoのインストールパスが含まれているか確認してください。

## 公式のインストールパッケージ

Goはさまざまなオペレーティングシステムに対応したインストールパッケージを提供しています、これらのパッケージはデフォルトで以下のディレクトリにインストールします：/usr/local/go（Windows：c:\Go）。当然これらのインストール場所を変更することもできますが、変更後はあなたの環境変数を以下のように設定する必要があります：

	export GOROOT=$HOME/go
	export GOPATH=$HOME/gopath
	export PATH=$PATH:$GOROOT/bin:$GOPATH/bin

これらのコマンドはMacやUnixユーザであれば`.bashrc`や`.zshrc`ファイルに入れておくべきでしょう。Windowsユーザであれば当然環境変数に入れておきます。

### オペレーティングシステムが32bitか64bitか判断する方法

Goのインストールにはオペレーティングシステムのbit数を判断する必要があるので、この章では先に自分のオペレーティングシステムの種類を確認しましょう。

Windowsのユーザは`Win+R`を押して`cmd`を実行してください。`systeminfo`と入力してエンターキーを押します。しばらくするとシステムの情報が表示されます。"システムの種類"の行に"x64-based PC"と表示されていれば64bitシステムです。もし"X86-based PC"とあれば、32bitシステムです。

Macユーザは直接64bit版を使用することを強くおすすめします。GoがサポートしているMac OS Xのバージョンは、すでに32bitプロセッサをサポートしていないためです。

LinuxユーザはTerminalで`uname -a`を実行することでシステムの情報を確かめることができます。64bitシステムであれば以下のように表示されます。

	<some description> x86_64 x86_64 x86_64 GNU/Linux
	// some machines such as Ubuntu 10.04 will show as following
	x86_64 GNU/Linux

32bitシステムの場合は以下のように表示されます。

	<some description> i686 i686 i386 GNU/Linux

### Mac

[ダウンロードページ][downlink]にアクセスし、32bitシステムは`go1.4.2.darwin-386.pkg`をダウンロードします。64bitシステムであれば`go1.12.4.darwin-amd64.pkg`をダウンロードします。ファイルをダブルクリックし、最後まで「次へ」ボタンをクリックします。これでgoはあなたのシステムにインストールされました。デフォルトでPATHの中に適切な`~/go/bin`が追加されています。端末を開いて`go`を実行します。図1.1の通り表示されればインストール成功です。

もしgoの使い方が表示された場合は、goはすでにインストールされています。もしこのコマンドが存在しないと表示された場合は、自分の環境変数PATHの中にgoのインストールディレクトリが含まれているか確認してください。

### Linux

[ダウンロードページ][downlink]にアクセスし、32bitシステムであれば`go1.12.4.linux-386.tar.gzを、64bitシステムであればgo1.12.4.linux-amd64.tar.gzをダウンロードします。以下ではGoがインストールされたディレクトリを`$GO_INSTALL_DIR`と仮定します。`tar.gz`をインストールディレクトリに解凍します：`tar zxvf go1.12.4.linux-amd64.tar.gz -C $GO_INSTALL_DIR`。そして環境変数PATHを設定します：`export PATH=$PATH:$GO_INSTALL_DIR/go/bin`。その後、端末を開いて`go`を実行します。図1.1の通り表示されればインストール成功です。

もしgoの使い方が表示された場合は、goはすでにインストールされています。もしこのコマンドが存在しないと出てきた場合は、自分の環境変数PATHの中にgoのインストールディレクトリが含まれているか確認してください。

### Windows

[ダウンロードページ][downlink]にアクセスし、32bit の場合は名前に windows-386 を含む msi パッケージを、64bit であれば名前に windows-amd64 を含むものをダウンロードします。ダウンロード後実行しますが、デフォルトのインストールフォルダである C:\go\を変更してはいけません。他の場所にインストールしてしまうと、あなたが書いた Go コードが実行できなくなってしまうかもしれません。インストールが終わるとデフォルトで環境変数 Path に Go のインストールフォルダの下にある bin フォルダ `C:\go\bin\` が追加され、Go のインストールフォルダである `C:\go\` の値が環境変数 GOROOT に追加されます。

#### インストールが成功しているか確認する

`Win+R`を押して`cmd` を入力し、コマンドラインツールを開きます。プロンプトで`go`と入力し、Goの使い方が表示されることで、Goがきちんとインストールされているか確かめることができます。`cd %GOROOT%` を入力すると、Go のインストールフォルダに入れるか確認できます。どちらも成功していれば、インストールに成功しています。

インストールに成功していなければ、環境変数 Path と GOROOT の値を確認してください。もし存在しなければアンインストール後、再インストールし、存在していればコンピュータを再起動し、上の手順を再度試してください。


## サードパーティツールのインストール
### GVM
GVMはサードパーティが開発したGoのバージョン管理ツールです。Rubyのrvmに似ています。相当使い勝手がいいです。GVMをインストールするには、以下のコマンド実行します：

	bash < <(curl -s -S -L https://raw.github.com/moovweb/gvm/master/binscripts/gvm-installer)

インストールが完了したあと、goをインストールすることができます（Go1.4がGo1.5以降をインストールするために必要なことは上述した通りです）：

	gvm install go.1.4.2
	gvm use go.4.2
	gvm install go1.12.4
	gvm use go1.12.4

下のコマンドで、毎回gvm useをコールする手間を省くことができます：
        gvm use go1.12.4 --default

上のコマンドを実行したあと、GOPATH、GOROOTなどの環境変数が自動的に設定されます。これで、直接利用することができます。

### apt-get
Ubuntuは現在最も広く利用されているLinuxデスクトップシステムです。Ubuntuは`apt-get`コマンドでソフトウェア・パッケージを管理します。以下のコマンドでGoをインストールすることができます、今後のため`git`と`mercurial`もインストールしておくべきでしょう：

	sudo apt-get install python-software-properties
	sudo add-apt-repository ppa:gophers/go
	sudo apt-get update
	sudo apt-get install golang-stable git-core mercurial

### wget

	wget https://storage.googleapis.com/golang/go1.12.4.linux-amd64.tar.gz
	sudo tar -xzf Go1.12.4.linux-amd64.tar.gz -C /usr/local 
	
	# Go environment
	export GOROOT=/usr/local/go
	export GOBIN=$GOROOT/bin
	export PATH=$PATH:$GOBIN
	export GOPATH=$HOME/gopath

Go1.8以降では、環境変数GOPATHに何も設定されていない場合はデフォルト値が入るようになりました。デフォルト値は、Unix系システムの場合は`$HOME/go`、Windowsの場合は`%%USERPROFILE%/go`となっています。

### Homebrew
HomebrewはMacで現在最も使用されているソフトウェア管理ツールです。現在Goをサポートしており、以下のコマンドでGoを直接インストールすることができます：

	brew update && brew upgrade
	brew install go

## links
   * [目次](<preface.md>)
   * 前へ: [Goの環境設定](<01.0.md>)
   * 次へ: [GOPATHとワーキングディレクトリ](<01.2.md>)

[downlink]:http://golang.org/dl/ "Goインストールパッケージダウンロード"
